<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>M.A.N.U.L. - Procedural Unit</title>
    <style>
        body { margin: 0; overflow: hidden; background: #0a0a0a; color: #00ff00; font-family: 'Courier New', monospace; }
        #ui { position: absolute; top: 20px; left: 20px; pointer-events: none; text-shadow: 2px 2px #000; }
        #overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background: rgba(0,0,0,0.8); z-index: 100; }
        .btn { border: 2px solid #00ff00; padding: 15px 40px; cursor: pointer; color: #00ff00; background: transparent; font-size: 1.2rem; transition: 0.3s; }
        .btn:hover { background: #00ff00; color: #000; }
    </style>
</head>
<body>

    <div id="ui">
        <h2>M.A.N.U.L. OS v2.0</h2>
        <p>STATUS: LOCAL BUILD ACTIVE</p>
    </div>

    <div id="overlay">
        <h1>UNIT INITIALIZED</h1>
        <button class="btn" id="start-btn">ENGAGE PILOT</button>
    </div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>

    <script type="module">
        import * as THREE from 'three';

        let scene, camera, renderer, robot, leftLeg, rightLeg, leftArm, rightArm;

        function buildAdvancedRobot() {
            const group = new THREE.Group();
            const metalMat = new THREE.MeshPhongMaterial({ color: 0x333333, shininess: 100 });
            const accentMat = new THREE.MeshPhongMaterial({ color: 0x555555 });
            const glowMat = new THREE.MeshBasicMaterial({ color: 0x00ff00 });

            // TORSO (Tapered)
            const torso = new THREE.Mesh(new THREE.BoxGeometry(1, 1.4, 0.7), metalMat);
            group.add(torso);

            // NECK & HEAD
            const neck = new THREE.Mesh(new THREE.CylinderGeometry(0.2, 0.2, 0.3), accentMat);
            neck.position.y = 0.85;
            group.add(neck);

            const head = new THREE.Mesh(new THREE.BoxGeometry(0.7, 0.5, 0.6), metalMat);
            head.position.y = 1.2;
            group.add(head);

            // VISOR (The "Eye")
            const visor = new THREE.Mesh(new THREE.BoxGeometry(0.6, 0.15, 0.1), glowMat);
            visor.position.set(0, 1.2, 0.3);
            group.add(visor);

            // ARMS
            const armGeom = new THREE.BoxGeometry(0.3, 1, 0.3);
            leftArm = new THREE.Mesh(armGeom, accentMat);
            leftArm.position.set(-0.7, 0.2, 0);
            group.add(leftArm);

            rightArm = new THREE.Mesh(armGeom, accentMat);
            rightArm.position.set(0.7, 0.2, 0);
            group.add(rightArm);

            // LEGS
            const legGeom = new THREE.BoxGeometry(0.4, 1.2, 0.4);
            leftLeg = new THREE.Mesh(legGeom, metalMat);
            leftLeg.position.set(-0.35, -1.3, 0);
            group.add(leftLeg);

            rightLeg = new THREE.Mesh(legGeom, metalMat);
            rightLeg.position.set(0.35, -1.3, 0);
            group.add(rightLeg);

            return group;
        }

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            camera.position.set(2, 1, 4);

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            const sun = new THREE.DirectionalLight(0xffffff, 2);
            sun.position.set(5, 10, 7.5);
            scene.add(sun, new THREE.AmbientLight(0x404040));

            const grid = new THREE.GridHelper(100, 40, 0x00ff00, 0x222222);
            grid.position.y = -2.5;
            scene.add(grid);

            robot = buildAdvancedRobot();
            scene.add(robot);

            document.getElementById('start-btn').onclick = () => {
                document.getElementById('overlay').style.display = "none";
            };

            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            const time = Date.now() * 0.005;

            if (robot) {
                // WALKING ANIMATION (Legs and Arms move back and forth)
                leftLeg.rotation.x = Math.sin(time) * 0.5;
                rightLeg.rotation.x = Math.sin(time + Math.PI) * 0.5;
                
                leftArm.rotation.x = Math.sin(time + Math.PI) * 0.4;
                rightArm.rotation.x = Math.sin(time) * 0.4;

                // Subtle body bobbing
                robot.position.y = Math.sin(time * 2) * 0.05;
                
                // Slow rotation to show off the model
                robot.rotation.y += 0.005;
            }

            renderer.render(scene, camera);
        }

            window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        init();
    </script>
</body>
</html>
